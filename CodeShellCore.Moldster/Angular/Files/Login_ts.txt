import { Component } from '@angular/core';
import { BaseComponent } from 'codeshell/baseComponents';
import { Shell } from 'codeshell/core';
import { AccountServiceBase } from 'codeshell/security';
import { NoteType, Utils } from 'codeshell/helpers';

@Component({ templateUrl: "./Login.html" })
export class Login extends BaseComponent {

    AccountService: AccountServiceBase = Shell.Injector.get(AccountServiceBase);
    model: any = {};
    GetPageId(): number { return 0; }

    ngOnInit() {
        super.ngOnInit();
        this.Title = Shell.Translator.instant("Words.Login");
    }

    Login() {
        
        this.AccountService.Login(this.model).then(data => {
            Shell.Session.StartSession(data);
            this.Router.navigateByUrl("/");
        }).catch(error => {
            Utils.HandleError(error, true);
        })
    }
}